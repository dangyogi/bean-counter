Money:

# only updated by hand:
Globals: name|int|decimal
Accounts: account|category|section|type
Starts: account|detail|coin|b1|b5|b10|b20|b50|b100 => total type

Reconcile: date|account|detail|coin|b1|b5|b10|b20|b50|b100|donations => total type ticket_price tickets_sold

1. update_reconcile [reconcile_file]
 
   Appends reconcile_file to Reconcile table

2. cash_balance --trail-run/-t

   Appends to Reconcile table:

   <today>|cash|w/o starts|...
   <today>|cash|w/starts  |...

3. cash_swap --trail-run/-t

   Last line of Reconcile table must be cash|w/starts| line.

   Appends to Reconcile table:

   <today>|cash out|          |...
   <today>|cash in |          |...
   <today>|cash    |w/o starts|...
   <today>|cash    |w/starts  |...

4. treasurer_report --pdf/-p

   No updates to database


Inventory:

# updated by hand
Items: item|unit|perishable|supplier|supplier_id|num_per_meal|num_per_table|num_per_serving => pkg_size pkg_weight
Products: item|supplier|supplier_id|name|item_num|location|price|pkg_size|pkg_weight|note
       => unit price_per_unit oz_per_unit

Inventory: date|item|code|num_pkgs|num_units|uncertainty => pkg_size total_units
    codes:
       - count
       - purchased (exact count)
       - used (exact count)
       - consumed (estimate)
       - estimate (includes uncertainty)
Months: month|year|start_date|end_date|num_at_meeting|staff_at_breakfast|tickets_claimed|
        served_fudge|consumed_fudge
     => month_str meals_served meeting_date breakfast_date

# not stored in database:
Orders: item|qty|supplier|supplier_id|purchased_pkgs|purchased_units|location|price => unit pkg_size pkg_weight

1. update_inventory --trail-run/-t [inventory-file]

2. check_inventory

   writes Inventory.csv with items to check listed

3. set_bf_min_max

4. create_orders

5. create_POs

6. set_meeting_attendance N

7. record_purchases

   from Orders.csv, also updates locations and prices

8. set_bf_stats staff tickets_claimed


Inventory codes:
    - count
    - purchased (exact count)
    - used (exact count, or estimate)
    - consumed (calculated estimate)
    - estimate (current estimate includes uncertainty)

set_min_max
    - create next Month, with start_date == prior month end_date + 1, set min_order, max_perishable, max_non_perishable
    - min_order = 1.35 (to 1.40) * new month's.avg_meals_served
    - max_perishable = 0.90 * (new month's.avg_meals_served + next month's.avg_meals_served)
    - max_non_perishable = 0.80 * (sum of new month and next 2 months.avg_meals.served)
    - verify numbers
    - write to Months
write_inv_checklist
    - update Inventory table by writing new  "estimate" rows.
    - calc orders
    - exp_count = cur_count + order
    - uncertainty = 0.10 * sum of consumed since last count
    - write all items that have exp_count - uncertainty < min or if perishable, exp_count + uncertainty > max_perishable
<do inventory>
    - manual step
    - write counts into checklist file
read_inv
    - write "count"s from checklist file to Inventory table.
write_orders
    - calc orders
    - write to csv file
<update orders>
    - manual step
read_orders
    - read csv file into Orders table
write_POs
    - write POs pdf
    - pencil in changes at meeting
set_meeting_attendance
    - num_at_meeting
set_breakfast_attendance
    - staff_at_breakfast
    - tickets_claimed
<update purchases in Orders.csv>
    - manual step looking at shopping receipts
record_purchases
    - add "purchased" rows to Inventory table
    - write receipt slips (computer figures out bills?)
update_reconciles
    - read rows into Reconcile table
    - print out final bill counts and total
write_treasurer_report (wait until Oct for Apr)
    - as pdf file.
    - set end_date of current Month
    - do set_min_max for next month
